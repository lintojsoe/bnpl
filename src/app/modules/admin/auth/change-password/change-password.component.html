<div class="flex flex-col flex-auto overflow-hidden page shadow rounded-2xl bg-card" @slideInLeft>
    <div class="flex flex-auto  flex-col  md:flex-row p-4 gap-x-4">
        <div class="flex flex-col md:flex-row gap-y-4 flex-auto justify-between">
            <div class="flex flex-col md:flex-row flex-auto items-center">
                <button
                    [ngClass]="(step1Password || step2Newpassword || step3Done) ? ' secondary-bg-color active-btn': ''"
                    class="mat-focus-indicator fuse-mat-button-large mat-flat-button mat-button-base stepper-btn px-8"
                    mat-flat-button>
                    <mat-icon class="mx-2" svgIcon="mat_outline:password"></mat-icon>
                    {{'Old Password' | translate}}

                </button>
                <hr class="hidden md:block"
                    [ngClass]="(step1Password || step2Newpassword || step3Done) ? ' active-hr': ''">
                <div class="block sm:hidden  vertical-line"
                    [ngClass]="(step1Password || step2Newpassword || step3Done) ? ' active-hr': ''"></div>

            </div>
            <div class="flex flex-col md:flex-row flex-auto items-center">
                <button [ngClass]="(step2Newpassword || step3Done) ? ' secondary-bg-color active-btn': ''"
                    class="mat-focus-indicator fuse-mat-button-large  mat-flat-button mat-button-base stepper-btn px-8"
                    mat-flat-button>
                    <mat-icon class="mx-2" svgIcon="mat_outline:message"></mat-icon>
                    {{'New Password' | translate}}
                </button>
                <hr class="hidden md:block" [ngClass]="(step2Newpassword || step3Done) ? ' active-hr': ''">
                <div class="block sm:hidden  vertical-line"
                    [ngClass]="(step2Newpassword || step3Done) ? ' active-hr': ''">
                </div>
            </div>
            <div class="flex flex-col md:flex-row items-center">
                <button [ngClass]="step3Done ? ' secondary-bg-color active-btn': ''"
                    class="mat-focus-indicator fuse-mat-button-large  mat-flat-button mat-button-base stepper-btn"
                    mat-flat-button>
                    <mat-icon class="mx-2" svgIcon="mat_outline:done"></mat-icon>
                    {{'Done' | translate}}
                </button>
            </div>
        </div>
    </div>
    <div class="flex flex-col flex-initial bg-card items-center p-2 md:p-8  shadow  overflow-hidden">
        <div *ngIf="step1Password" class="flex flex-col sm:flex-row items-center flex-auto min-w-0">
            <div
                class="md:flex md:items-center md:justify-end w-full  md:h-full py-8 px-4 sm:p-12 md:p-16 rounded-2xl rounded-none shadow bg-card">
                <div class="w-full mx-auto sm:mx-0">

                    <!-- Title -->
                    <div style="text-align: center;"
                        class="mt-8 text-xl items-center font-extrabold tracking-tight leading-tight">
                        {{'Enter your old password' | translate}}
                    </div>

                    <!-- Alert -->

                    <!-- Reset password form -->
                    <form class="mt-8" [formGroup]="resetPasswordForm" #resetPasswordNgForm="ngForm">

                        <!-- Password field -->
                        <mat-form-field class="w-full">
                            <mat-label>{{'Old Password' | translate}}</mat-label>
                            <input id="password" matInput type="password" [formControlName]="'oldPassword'"
                                #passwordField>
                            <button mat-icon-button type="button"
                                (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'"
                                matSuffix>
                                <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'password'"
                                    [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                                <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'text'"
                                    [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                            </button>
                            <mat-error>
                                {{'Old Password is required' | translate}}
                            </mat-error>
                        </mat-form-field>

                        <!-- Submit button -->
                        <button class="fuse-mat-button-large  rounded-lg mt-3 min-h-0 h-9" mat-flat-button
                            [color]="'primary'" [disabled]="!resetPasswordForm.get('oldPassword').valid"
                            (click)="checkPassword()">
                            <span>
                                {{'Submit & Next' | translate}}
                            </span>
                            <!-- <mat-progress-spinner *ngIf="resetPasswordForm.disabled" [diameter]="24"
                                [mode]="'indeterminate'">
                            </mat-progress-spinner> -->
                        </button>

                    </form>
                </div>
            </div>
        </div>
        <div *ngIf="step2Newpassword" class="flex flex-col sm:flex-row items-center flex-auto min-w-0">
            <div
                class="md:flex md:items-center md:justify-end w-full  md:h-full py-8 px-4 sm:p-12 md:p-16 rounded-2xl rounded-none shadow bg-card">
                <div class="w-full mx-auto sm:mx-0">

                    <!-- Title -->
                    <div style="text-align: center;"
                        class="mt-8 text-xl items-center font-extrabold tracking-tight leading-tight">
                        {{'Reset your password' | translate}}
                    </div>

                    <!-- Alert -->

                    <!-- Reset password form -->
                    <form class="mt-8" [formGroup]="resetPasswordForm" #resetPasswordNgForm="ngForm">

                        <!-- Password field -->
                        <mat-form-field class="w-full">
                            <mat-label>{{'Password' | translate}}</mat-label>
                            <input id="password" matInput type="password" [formControlName]="'password'" #passwordField>
                            <button mat-icon-button type="button"
                                (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'"
                                matSuffix>
                                <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'password'"
                                    [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                                <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'text'"
                                    [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                            </button>
                            <mat-error>
                                {{'Password is required' | translate}}
                            </mat-error>
                        </mat-form-field>

                        <!-- Password confirm field -->
                        <mat-form-field class="w-full">
                            <mat-label>{{'Password (Confirm)' | translate}}</mat-label>
                            <input id="password-confirm" matInput type="password" [formControlName]="'passwordConfirm'"
                                #passwordConfirmField>
                            <button mat-icon-button type="button"
                                (click)="passwordConfirmField.type === 'password' ? passwordConfirmField.type = 'text' : passwordConfirmField.type = 'password'"
                                matSuffix>
                                <mat-icon class="icon-size-5" *ngIf="passwordConfirmField.type === 'password'"
                                    [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                                <mat-icon class="icon-size-5" *ngIf="passwordConfirmField.type === 'text'"
                                    [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                            </button>
                            <mat-error *ngIf="resetPasswordForm.get('passwordConfirm').hasError('required')">
                                {{'Password confirmation is required' | translate}}
                            </mat-error>
                            <mat-error *ngIf="resetPasswordForm.get('passwordConfirm').hasError('mustMatch')">
                                {{'Passwords must match' | translate}}
                            </mat-error>
                        </mat-form-field>

                        <!-- Submit button -->
                        <button class="fuse-mat-button-large  rounded-lg mt-3 min-h-0 h-9" mat-flat-button
                            [color]="'primary'" [disabled]="resetPasswordForm.disabled" (click)="resetPassword()">
                            <span *ngIf="!resetPasswordForm.disabled">
                                {{'Submit & Next' | translate}}
                            </span>
                            <mat-progress-spinner *ngIf="resetPasswordForm.disabled" [diameter]="24"
                                [mode]="'indeterminate'">
                            </mat-progress-spinner>
                        </button>

                    </form>
                </div>
            </div>
        </div>

        <div class="flex flex-col flex-initial items-center gap-4 justify-center" *ngIf="step3Done">
            <div
                class="flex flex-col flex-initial bg-card shadow rounded-2xl w-full md:w-140 items-center gap-8 p-4 h-100 justify-center ">
                <div class="text-4xl leading-none success-text-color">{{'Success' | translate}}</div>
                <img src="../../../../assets/images/checked.svg" class="h-30">
                <div class="text-lg  leading-none highlight-text-color">
                    {{'Successfully you changed your password' | translate}}</div>
                <div class="flex flex-col flex-initial">
                    <button
                        class="mat-focus-indicator  rounded-lg min-h-0 h-9 fuse-mat-button-large primary-bg-color mat-flat-button mat-button-base"
                        mat-flat-button (click)="backToDashboard()">
                        {{'Back to Dashboard' | translate}}
                    </button>
                </div>


            </div>
        </div>

    </div>


</div>
